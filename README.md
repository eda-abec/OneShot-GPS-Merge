# OneShot report to Coordinates Merger

**os_gps_merge.py** is a little script to match WiFis from reports of [OneShot](https://github.com/drygdryg/OneShot) (`stored.csv`) to their real-life coordinates.
For this, a wardriving DB is needed. Currently, a .csv file exported from WiGLE app is supported.
Those two files are compared and their conjunction (based on MAC addresses) is then written to output file.

You can then feed the result to [OneShot-GPS-Visualizer](https://github.com/eda-abec/OneShot-GPS-Visualizer), which displays it on map.

This project is still in development, any suggestions and pull requests are welcome :)


## Usage
The script works only with Python3, older 2.x is not supported.

Makefile is included, default target runs the script.\
Expects specific filenames.

```
make

# prints running time of the script
make benchmark
```

From help:
```
usage: os_gps_a.py [-h] OneShot_report WiGLE_file output

OneShot GPS Merger (c) 2020 eda-abec
based on OneShotPin 0.0.2 (c) 2017 rofl0r, modded by drygdryg

positional arguments:
  OneShot_report        Input file generated by OneShot, usually named stored.csv
  WiGLE_file            Input file with APs and their GPS coordinates, generated by Wigle,
                        usually named WigleWifi_{date}.csv. Note: must be latin-1 encoded,
                        which is default
  output                Output file with merged APs and GPS coordinates

optional arguments:
  -h, --help            show this help message and exit

Example: os_gps_merge.py stored.csv Wigle.csv stored_gps.csv
```

## CSV Formats

### OneShot
A standard, as-is from OneShot
```
encoding="utf-8"
delimiter=';'
```

### [WiGLE](https://api.wigle.net/csvFormat.html)
Does not have UTF-8 encoding.
```
encoding="latin-1"
delimiter=','
```

### Output
Columns are same as in OneShot report, with `CurrentLatitude` and `CurrentLongitude` added to end.
```
encoding="utf-8"
delimiter=';'
```


## TODOs

- better name
- some universal output format?
    - KML?
- matching by time
- small TODOs
    - catch KeyboardInterrupt
    - parameters
    - add switch for WiGLE encoding
    - quiet mode
    - output to stdout?

## Acknowledgements

Author: [eda-abec](https://github.com/eda-abec)\
Date: 12/2020\
Based on and Thanks to:
- [OneShot](https://github.com/drygdryg/OneShot)
- [WiGLE.net](https://github.com/wiglenet)

See also [OneShot-GPS-Visualizer](https://github.com/eda-abec/OneShot-GPS-Visualizer)
